
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Documentation for Triage." name="description"/>
<link href="http://dssg.github.io/triage/api/timechop/timechop/" rel="canonical"/>
<link href="../../../assets/images/favicon.ico" rel="icon"/>
<meta content="mkdocs-1.3.0, mkdocs-material-7.0.6" name="generator"/>
<title>Timechop - Triage Documentation</title>
<link href="../../../assets/stylesheets/main.2c0c5eaf.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.7fa14f5b.min.css" rel="stylesheet"/>
<meta content="#546d78" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Ubuntu";--md-code-font-family:"Ubuntu Mono"}</style>
<link href="../../../triage_docs.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="deep-orange" data-md-color-primary="blue-grey" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#triage.component.timechop.timechop.logger">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Triage Documentation" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Triage Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-6v7L9.5 7.5 7 9V2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Triage Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Timechop
            
          </span>
</div>
</div>
</div>
<div class="md-header__options">
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="http://github.com/dssg/triage" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    dssg/triage
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Triage Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Triage Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-6v7L9.5 7.5 7 9V2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12z"></path></svg>
</a>
    Triage Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="http://github.com/dssg/triage" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    dssg/triage
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
        Get started with your own project
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Get started with your own project" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Get started with your own project
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../quickstart/">
        Quickstart guide
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../triage_project_workflow/">
        Suggested workflow
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
        Dirty Duck Tutorial
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Dirty Duck Tutorial" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Dirty Duck Tutorial
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dirtyduck/">
        Welcome!
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dirtyduck/dirty_duckling/">
        Dirty duckling
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3">
        Case studies
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Case studies" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
          Case studies
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dirtyduck/problem_description/">
        Problem description
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dirtyduck/eis/">
        Early Warning System
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dirtyduck/inspections/">
        Resource prioritization
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" id="__nav_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_4">
        Triage
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Triage" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_4">
<span class="md-nav__icon md-icon"></span>
          Triage
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dirtyduck/triage_intro/">
        A deeper look into triage
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" id="__nav_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5">
        Are you curious about the setup?
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Are you curious about the setup?" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
          Are you curious about the setup?
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dirtyduck/infrastructure/">
        Infrastructure
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dirtyduck/data_preparation/">
        Data preparation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dirtyduck/for_the_impatient/">
        Quick setup
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
        Triage documentation
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Triage documentation" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Triage documentation
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" id="__nav_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1">
        Experiment
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Experiment" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
          Experiment
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/experiment-config/">
        Experiment Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/feature-testing/">
        Testing Feature Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/running/">
        Running an Experiment
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_4" id="__nav_4_1_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1_4">
        Upgrading an Experiment
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Upgrading an Experiment" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_4">
<span class="md-nav__icon md-icon"></span>
          Upgrading an Experiment
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/upgrade-to-v8/">
        v7 -&gt; v8
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/upgrade-to-v7/">
        v6 -&gt; v7
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/upgrade-to-v6/">
        v5 -&gt; v6
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/upgrade-to-v5/">
        v3/v4 -&gt; v5
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/temporal-validation/">
        Temporal Validation Deep Dive
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/cohort-labels/">
        Cohort and Label Deep Dive
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/prediction-ranking/">
        Prediction Ranking
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/features/">
        Feature Generation Recipe Book
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/algorithm/">
        Experiment Algorithm
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../experiments/architecture/">
        Experiment Architecture
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2">
        Model selection
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Model selection" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          Model selection
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../audition/audition_intro/">
        Intro to Audition
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../audition/model_selection/">
        Model Selection Concepts
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../audition/">
        API Reference
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" id="__nav_4_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_3">
        Postmodeling
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Postmodeling" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
          Postmodeling
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../postmodeling/">
        Using Postmodeling
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../postmodeling/postmodeling-config/">
        Postmodeling &amp; Crosstabs Configuration
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dirtyduck/ml_governance/">
        Model governance
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../predictlist/">
        Predictlist
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dirtyduck/aws_batch/">
        Scaling up
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../db/">
        Database Provisioner
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_8" id="__nav_4_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_8">
        API Reference
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API Reference" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_8">
<span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_8_1" id="__nav_4_8_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_8_1">
        Audition
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Audition" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_8_1">
<span class="md-nav__icon md-icon"></span>
          Audition
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../audition/auditioner/">
        Auditioner
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../audition/audition-config/">
        Audition Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../audition/selection_rules/">
        Selection Rules
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../audition/database-dependencies/">
        Database Dependencies
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#triage.component.timechop.timechop.logger">
    logger
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#classes">
    Classes
  </a>
<nav aria-label="Classes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#triage.component.timechop.timechop.Timechop">
    Timechop
  </a>
<nav aria-label="Timechop" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#methods">
    Methods
  </a>
<nav aria-label="Methods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#triage.component.timechop.timechop.Timechop.__init__">
    __init__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#triage.component.timechop.timechop.Timechop.calculate_as_of_times">
    calculate_as_of_times()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#triage.component.timechop.timechop.Timechop.calculate_train_test_split_times">
    calculate_train_test_split_times()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#triage.component.timechop.timechop.Timechop.chop_time">
    chop_time()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#triage.component.timechop.timechop.Timechop.define_test_matrices">
    define_test_matrices()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#triage.component.timechop.timechop.Timechop.define_train_matrix">
    define_train_matrix()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#triage.component.timechop.timechop.Timechop.generate_matrix_definitions">
    generate_matrix_definitions()
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="http://github.com/dssg/triage/edit/master/docs/sources/api/timechop/timechop.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1>Timechop</h1>
<div class="doc doc-object doc-module">
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h3 class="doc doc-heading" id="triage.component.timechop.timechop.logger">
<code class="highlight">
logger        </code>
<a class="headerlink" href="#triage.component.timechop.timechop.logger" title="Permanent link">#</a></h3>
<div class="doc doc-contents">
</div>
</div>
<h2 id="classes">Classes<a class="headerlink" href="#classes" title="Permanent link">#</a></h2>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="triage.component.timechop.timechop.Timechop">
<code>Timechop</code>
<a class="headerlink" href="#triage.component.timechop.timechop.Timechop" title="Permanent link">#</a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<h4 id="methods">Methods<a class="headerlink" href="#methods" title="Permanent link">#</a></h4>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="triage.component.timechop.timechop.Timechop.__init__">
<code class="highlight language-python">
__init__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature_start_time</span><span class="p">,</span> <span class="n">feature_end_time</span><span class="p">,</span> <span class="n">label_start_time</span><span class="p">,</span> <span class="n">label_end_time</span><span class="p">,</span> <span class="n">model_update_frequency</span><span class="p">,</span> <span class="n">training_as_of_date_frequencies</span><span class="p">,</span> <span class="n">max_training_histories</span><span class="p">,</span> <span class="n">training_label_timespans</span><span class="p">,</span> <span class="n">test_as_of_date_frequencies</span><span class="p">,</span> <span class="n">test_durations</span><span class="p">,</span> <span class="n">test_label_timespans</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#triage.component.timechop.timechop.Timechop.__init__" title="Permanent link">#</a></h5>
<div class="doc doc-contents">
<p>Date strings should follow the format <code>YYYY-MM-DD</code>. Date intervals
should be strings of the Postgres interval input format.</p>
<p>This class is often used within the Triage experiment pipeline, and
initialized using parameters from a Triage <a href="../../../experiments/experiment-config/#time-splitting">experiment config</a></p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>feature_start_time</code></td>
<td><code>str</code></td>
<td>
<p>Earliest date included in any feature</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>feature_end_time</code></td>
<td><code>str</code></td>
<td>
<p>Day after last feature date (all data
included in features are before this date)</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>label_start_time</code></td>
<td><code>str</code></td>
<td>
<p>Earliest date for which labels are available</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>label_end_time</code></td>
<td><code>str</code></td>
<td>
<p>Day AFTER last label date (all dates in any
model are before this date)</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>model_update_frequency</code></td>
<td><code>str</code></td>
<td>
<p>how frequently to retrain models</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>training_as_of_date_frequencies</code></td>
<td><code>str</code></td>
<td>
<p>time between rows for same
entity in train matrix</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>max_training_histories</code></td>
<td><code>str</code></td>
<td>
<p>Interval specifying how much history
for each entity to train on</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>training_label_timespans</code></td>
<td><code>str</code></td>
<td>
<p>how much time is included in a label
in the train matrix</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>test_as_of_date_frequencies</code></td>
<td><code>str</code></td>
<td>
<p>time between rows for same entity
in test matrix</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>test_durations</code></td>
<td><code>str</code></td>
<td>
<p>How long into the future to make predictions
for each entity. Controls the length of time included in a test
matrix</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>test_label_timespans</code></td>
<td><code>str</code></td>
<td>
<p>How much time is included in a label
in the test matrix.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="triage.component.timechop.timechop.Timechop.calculate_as_of_times">
<code class="highlight language-python">
calculate_as_of_times<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">as_of_start_limit</span><span class="p">,</span> <span class="n">as_of_end_limit</span><span class="p">,</span> <span class="n">data_frequency</span><span class="p">,</span> <span class="n">forward</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#triage.component.timechop.timechop.Timechop.calculate_as_of_times" title="Permanent link">#</a></h5>
<div class="doc doc-contents">
<p>Given a start and stop time, a frequncy, and a direction, calculate the
as of times for a matrix.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>as_of_start_limit</code></td>
<td><code>datetime.datetime</code></td>
<td>
<p>the earliest possible as of time for a matrix</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>as_of_end_limit</code></td>
<td><code>datetime.datetime</code></td>
<td>
<p>the last possible as of time for the matrix</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>data_frequency</code></td>
<td><code>str</code></td>
<td>
<p>The time interval that should pass between rows
of a single entity. Of the format <code>'date unit'</code>. For example,
<code>'1 month'</code>.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>forward</code></td>
<td><code>boolean</code></td>
<td>
<p>whether to generate times forward from the start time
            (True) or backward from the end time (False)</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>list of as of times for the matrix</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="triage.component.timechop.timechop.Timechop.calculate_train_test_split_times">
<code class="highlight language-python">
calculate_train_test_split_times<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">training_label_timespan</span><span class="p">,</span> <span class="n">test_label_timespan</span><span class="p">,</span> <span class="n">test_duration</span><span class="p">)</span> </code>
<a class="headerlink" href="#triage.component.timechop.timechop.Timechop.calculate_train_test_split_times" title="Permanent link">#</a></h5>
<div class="doc doc-contents">
<p>Calculate the split times between train and test matrices. All
label spans in train matrices will end at this time, and this will be
the first as of time in the respective test matrix.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>training_label_timespan</code></td>
<td><code>dateutil.relativedelta.relativedelta</code></td>
<td>
<p>how much
time is included in training labels</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>test_label_timespan</code></td>
<td><code>dateutil.relativedelta.relativedelta</code></td>
<td>
<p>how much time is included in test labels</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>test_duration</code></td>
<td><code>str</code></td>
<td>
<p>for how long after the end of a training matrix are
test predictions made</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>all split times for the temporal parameters</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ValueError</code></td>
<td>
<p>if there are no valid split times in the temporal</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="triage.component.timechop.timechop.Timechop.chop_time">
<code class="highlight language-python">
chop_time<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#triage.component.timechop.timechop.Timechop.chop_time" title="Permanent link">#</a></h5>
<div class="doc doc-contents">
<p>Given the attributes of the object, define all train/test splits
for all combinations of the temporal parameters.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>a list of dictionaries defining train/test splits</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="triage.component.timechop.timechop.Timechop.define_test_matrices">
<code class="highlight language-python">
define_test_matrices<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">train_test_split_time</span><span class="p">,</span> <span class="n">test_duration</span><span class="p">,</span> <span class="n">test_label_timespan</span><span class="p">)</span> </code>
<a class="headerlink" href="#triage.component.timechop.timechop.Timechop.define_test_matrices" title="Permanent link">#</a></h5>
<div class="doc doc-contents">
<p>Given a train/test split time and a set of testing parameters,
generate the metadata and as of times for the test matrices in a split.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>train_test_split_time</code></td>
<td><code>datetime.datetime</code></td>
<td>
<p>the limit of the last label in the matrix</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>test_duration</code></td>
<td><code>str</code></td>
<td>
<p>how far forward from split do test as_of_times go</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>test_label_timespan</code></td>
<td><code>str</code></td>
<td>
<p>how much time is covered by test labels</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>list of dictionaries defining the test matrices for a split</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="triage.component.timechop.timechop.Timechop.define_train_matrix">
<code class="highlight language-python">
define_train_matrix<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">train_test_split_time</span><span class="p">,</span> <span class="n">training_label_timespan</span><span class="p">,</span> <span class="n">max_training_history</span><span class="p">,</span> <span class="n">training_as_of_date_frequency</span><span class="p">)</span> </code>
<a class="headerlink" href="#triage.component.timechop.timechop.Timechop.define_train_matrix" title="Permanent link">#</a></h5>
<div class="doc doc-contents">
<p>Given a split time and the parameters of a training matrix, generate
the as of times and metadata for a train matrix.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>train_test_split_time</code></td>
<td><code>datetime.datetime</code></td>
<td>
<p>the limit of the last label in the matrix</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>training_label_timespan</code></td>
<td><code>str</code></td>
<td>
<p>how much time is covered by the labels</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>max_training_history</code></td>
<td><code>str</code></td>
<td>
<p>how far back from split do as_of_times go</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>training_as_of_date_frequency</code></td>
<td><code>str</code></td>
<td>
<p>how much time between rows for an entity</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dict</code></td>
<td>
<p>dictionary containing the temporal parameters and as of times
      for a train matrix</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="triage.component.timechop.timechop.Timechop.generate_matrix_definitions">
<code class="highlight language-python">
generate_matrix_definitions<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">train_test_split_time</span><span class="p">,</span> <span class="n">training_as_of_date_frequency</span><span class="p">,</span> <span class="n">max_training_history</span><span class="p">,</span> <span class="n">test_duration</span><span class="p">,</span> <span class="n">training_label_timespan</span><span class="p">,</span> <span class="n">test_label_timespan</span><span class="p">)</span> </code>
<a class="headerlink" href="#triage.component.timechop.timechop.Timechop.generate_matrix_definitions" title="Permanent link">#</a></h5>
<div class="doc doc-contents">
<p>Given a split time and parameters for train and test matrices,
generate as of times and metadata for the matrices in the split.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>train_test_split_time</code></td>
<td><code>datetime.datetime</code></td>
<td>
<p>the limit of the last label in the matrix</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>training_as_of_date_frequency</code></td>
<td><code>str</code></td>
<td>
<p>how much time between rows for an entity
                            in a training matrix</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>max_training_history</code></td>
<td><code>str</code></td>
<td>
<p>how far back from split do train
                        as_of_times go</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>test_duration</code></td>
<td><code>str</code></td>
<td>
<p>how far forward from split do test as_of_times go</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>training_label_timespan</code></td>
<td><code>str</code></td>
<td>
<p>how much time covered by train labels</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>test_label_timespan</code></td>
<td><code>str</code></td>
<td>
<p>how much time is covered by test labels</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dict</code></td>
<td>
<p>dictionary defining the train and test matrices for a split</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
<div class="md-footer-social">
<a class="md-footer-social__link" href="https://github.com/dssg/triage" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://twitter.com/datascifellows" rel="noopener" target="_blank" title="twitter.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://linkedin.com/company/center-for-data-science-and-public-policy-university-of-chicago" rel="noopener" target="_blank" title="linkedin.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.fb4a9340.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing"}, "version": null}</script>
<script src="../../../assets/javascripts/bundle.a1c7c35e.min.js"></script>
<script src="../../../js/mermaid.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>