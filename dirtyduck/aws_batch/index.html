
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Documentation for Triage." name="description"/>
<link href="http://dssg.github.io/triage/dirtyduck/aws_batch/" rel="canonical"/>
<link href="../../assets/images/favicon.ico" rel="icon"/>
<meta content="mkdocs-1.3.0, mkdocs-material-7.0.6" name="generator"/>
<title>Scaling up - Triage Documentation</title>
<link href="../../assets/stylesheets/main.2c0c5eaf.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.7fa14f5b.min.css" rel="stylesheet"/>
<meta content="#546d78" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Ubuntu";--md-code-font-family:"Ubuntu Mono"}</style>
<link href="../../triage_docs.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="deep-orange" data-md-color-primary="blue-grey" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#scaling-out-aws-batch">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Triage Documentation" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Triage Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-6v7L9.5 7.5 7 9V2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Triage Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Scaling up
            
          </span>
</div>
</div>
</div>
<div class="md-header__options">
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="http://github.com/dssg/triage" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    dssg/triage
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Triage Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Triage Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-6v7L9.5 7.5 7 9V2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12z"></path></svg>
</a>
    Triage Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="http://github.com/dssg/triage" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    dssg/triage
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
        Get started with your own project
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Get started with your own project" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Get started with your own project
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../quickstart/">
        Quickstart guide
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../triage_project_workflow/">
        Suggested workflow
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
        Dirty Duck Tutorial
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Dirty Duck Tutorial" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Dirty Duck Tutorial
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../">
        Welcome!
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dirty_duckling/">
        Dirty duckling
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3">
        Case studies
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Case studies" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
          Case studies
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../problem_description/">
        Problem description
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../eis/">
        Early Warning System
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../inspections/">
        Resource prioritization
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" id="__nav_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_4">
        Triage
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Triage" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_4">
<span class="md-nav__icon md-icon"></span>
          Triage
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../triage_intro/">
        A deeper look into triage
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" id="__nav_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5">
        Are you curious about the setup?
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Are you curious about the setup?" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
          Are you curious about the setup?
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../infrastructure/">
        Infrastructure
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../data_preparation/">
        Data preparation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../for_the_impatient/">
        Quick setup
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
        Triage documentation
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Triage documentation" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Triage documentation
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" id="__nav_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1">
        Experiment
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Experiment" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
          Experiment
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/experiment-config/">
        Experiment Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/feature-testing/">
        Testing Feature Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/running/">
        Running an Experiment
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_4" id="__nav_4_1_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1_4">
        Upgrading an Experiment
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Upgrading an Experiment" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_4">
<span class="md-nav__icon md-icon"></span>
          Upgrading an Experiment
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/upgrade-to-v8/">
        v7 -&gt; v8
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/upgrade-to-v7/">
        v6 -&gt; v7
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/upgrade-to-v6/">
        v5 -&gt; v6
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/upgrade-to-v5/">
        v3/v4 -&gt; v5
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/temporal-validation/">
        Temporal Validation Deep Dive
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/cohort-labels/">
        Cohort and Label Deep Dive
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/prediction-ranking/">
        Prediction Ranking
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/features/">
        Feature Generation Recipe Book
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/algorithm/">
        Experiment Algorithm
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../experiments/architecture/">
        Experiment Architecture
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2">
        Model selection
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Model selection" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          Model selection
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../audition/audition_intro/">
        Intro to Audition
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../audition/model_selection/">
        Model Selection Concepts
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/audition/">
        API Reference
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" id="__nav_4_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_3">
        Postmodeling
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Postmodeling" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
          Postmodeling
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../postmodeling/">
        Using Postmodeling
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../postmodeling/postmodeling-config/">
        Postmodeling &amp; Crosstabs Configuration
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ml_governance/">
        Model governance
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../predictlist/">
        Predictlist
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Scaling up
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Scaling up
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-do-you-need-to-setup">
    What do you need to setup?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#assumptions">
    Assumptions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration">
    Configuration
  </a>
<nav aria-label="Configuration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#local-environment-variables">
    (Local) Environment variables
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#job-definition">
    Job definition
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#environment-variables-overrides-for-docker-container-inside-the-aws-ec2">
    Environment variables overrides (for docker container inside the AWS EC2)
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#credentials-filter">
    credentials-filter
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#running-an-experiment">
    Running an experiment
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#suggested-workflow">
    Suggested workflow
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../db/">
        Database Provisioner
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_8" id="__nav_4_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_8">
        API Reference
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API Reference" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_8">
<span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_8_1" id="__nav_4_8_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_8_1">
        Audition
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Audition" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_8_1">
<span class="md-nav__icon md-icon"></span>
          Audition
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/audition/auditioner/">
        Auditioner
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/audition/audition-config/">
        Audition Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/audition/selection_rules/">
        Selection Rules
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/audition/database-dependencies/">
        Database Dependencies
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-do-you-need-to-setup">
    What do you need to setup?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#assumptions">
    Assumptions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration">
    Configuration
  </a>
<nav aria-label="Configuration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#local-environment-variables">
    (Local) Environment variables
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#job-definition">
    Job definition
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#environment-variables-overrides-for-docker-container-inside-the-aws-ec2">
    Environment variables overrides (for docker container inside the AWS EC2)
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#credentials-filter">
    credentials-filter
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#running-an-experiment">
    Running an experiment
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#suggested-workflow">
    Suggested workflow
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="http://github.com/dssg/triage/edit/master/docs/sources/dirtyduck/aws_batch.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="scaling-out-aws-batch">Scaling out: AWS Batch<a class="headerlink" href="#scaling-out-aws-batch" title="Permanent link">#</a></h1>
<blockquote>
<p>If your laptop choked in the previous sections or if you can't afford to look your laptop just lagging forever, you should read this section…</p>
</blockquote>
<p>For bigger experiment, one option is use <code>[[https://aws.amazon.com/batch/][AWS Batch]]</code>. AWS Batch dynamically provisions the optimal quantity and type of compute resources based on the specific resource requirements of the tasks submitted. AWS Batch will manage (i.e. plans, schedules, and executes) the resources (CPU, Memory) that we need to run the pipeline. In other words, AWS Batch will provide you with a computer (an AWS EC2 machine) that satisfies your computing requirements, and then it will execute the software that you intend to run.</p>
<p>AWS Batch dependes in other two technologies in order to work: Elastic Container Registry (Amazon ECR) as the Docker image registry (allowing AWS Batch to fetch the task images), and Elastic Compute Cloud (Amazon EC2) instances located in the cluster as the docker host (allowing AWS Batch to execute the task).</p>
<p><img alt="img" src="../images/AWS_Batch_Architecture.png" title="Diagram showing the AWS Batch main components and their relationships."/></p>
<p>An AWS ECS task will be executed by an EC2 instance belonging to the ECS cluster (if there are resources available). The EC2 machine operates as a Docker host: it will run the task definition, download the appropriate image from the ECS registry, and execute the container.</p>
<h2 id="what-do-you-need-to-setup">What do you need to setup?<a class="headerlink" href="#what-do-you-need-to-setup" title="Permanent link">#</a></h2>
<p>AWS Batch requires setup the following infrastructure:</p>
<ul>
<li>An <a href="https://aws.amazon.com/s3/?nc2=h_m1">AWS S3 bucket</a> for storing the original data and the successive transformations of it made by the pipeline.</li>
<li>A PostgreSQL database (provided by <a href="https://aws.amazon.com/rds/">AWS RDS</a>) for storing the data in a relational form.</li>
<li>An Elastic Container Registry (<a href="https://aws.amazon.com/ecs/">AWS ECR</a>) for storing the triage's Docker image used in the pipeline.</li>
<li><a href="https://aws.amazon.com/batch/">AWS Batch Job Queue</a> configured and ready to go.</li>
</ul>
<h2 id="assumptions">Assumptions<a class="headerlink" href="#assumptions" title="Permanent link">#</a></h2>
<ul>
<li>You have <code>[[https://stedolan.github.io/jq/download/][jq]]</code> installed</li>
<li>You have IAM credentials with permissions to run AWS Batch, read AWS S3 and create AWS EC2 machines.</li>
<li>You installed <code>awscli</code> and configure your credentials following the standard instructions.</li>
<li>You have access to a S3 bucket:</li>
<li>You have a AWS ECR repository with the following form: <code>dsapp/triage-cli</code></li>
<li>You have a AWS Batch job queue configured and have permissions for adding, running, canceling jobs.</li>
</ul>
<p>You can check if you have the <code>AWS S3</code> permissions like:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="nv">AWS_PROFILE</span><span class="o">=</span>your_profile<span class="o">]</span> aws ls <span class="o">[</span>your-bucket<span class="o">]</span>   <span class="c1"># (dont't forget the last backslash)</span>
</code></pre></div>
<p>And for the <code>AWS Batch</code> part:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="nv">AWS_PROFILE</span><span class="o">=</span>your_profile<span class="o">]</span> aws batch describe-job-queues
<span class="o">[</span><span class="nv">AWS_PROFILE</span><span class="o">=</span>your_profile<span class="o">]</span> aws batch describe-job-definitions
</code></pre></div>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">#</a></h2>
<p>First we need to customize the file <code>.aws_env</code> (yes, another environment file).</p>
<p>Copy the file <code>aws_env.example</code> to <code>.aws_env</code> and fill the blanks</p>
<p><strong>NOTE</strong>: Don't include the <code>s3://</code> protocol prefix in the <code>S3_BUCKET</code></p>
<h3 id="local-environment-variables">(Local) Environment variables<a class="headerlink" href="#local-environment-variables" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>#!/usr/bin/env bash

PROJECT_NAME=dirtyduck
TRIAGE_VERSION=3.3.0
ENV=development
AWS_REGISTRY={your-ecr-registry}
AWS_JOB_QUEUE={your-job-queue}
POSTGRES_DB={postgresql://user:password@db_server/dbname}
S3_BUCKET={your-bucket}
</code></pre></div>
<p>To check if everything is correct you can run:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="nv">AWS_PROFILE</span><span class="o">=</span>your_profile<span class="o">]</span>  ./deploy.sh -h
</code></pre></div>
<p>Next, we need 3 files for running in AWS Batch, copy the files and remove the <code>.example</code> extension and adapt them to your case:</p>
<h3 id="job-definition">Job definition<a class="headerlink" href="#job-definition" title="Permanent link">#</a></h3>
<p>Change the <code>PROJECT_NAME</code> and <code>AWS_ACCOUNT</code> for their real values</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">"containerProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"command"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="s2">"--tb"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"Ref::experiment_file"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"--project-path"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"Ref::output_path"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"Ref::replace"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"Ref::save_predictions"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"Ref::profile"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"Ref::validate"</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS_ACCOUNT.dkr.ecr.us-west-2.amazonaws.com/YOUR_TRIAGE_IMAGE"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"jobRoleArn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:iam::AWS_ACCOUNT:role/dsappBatchJobRole"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"memory"</span><span class="p">:</span><span class="w"> </span><span class="mi">16000</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"vcpus"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nt">"jobDefinitionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"triage-cli-experiment"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"retryStrategy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"attempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"container"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="environment-variables-overrides-for-docker-container-inside-the-aws-ec2">Environment variables overrides (for docker container inside the AWS EC2)<a class="headerlink" href="#environment-variables-overrides-for-docker-container-inside-the-aws-ec2" title="Permanent link">#</a></h3>
<p>Fill out the missing values</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"environment"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"AWS_DEFAULT_REGION"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"us-west-2"</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"AWS_JOB_QUEUE"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">""</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"POSTGRES_PASSWORD"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">""</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"POSTGRES_USER"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">""</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"POSTGRES_DB"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">""</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"POSTGRES_PORT"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">""</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"POSTGRES_HOST"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">""</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="credentials-filter"><code>credentials-filter</code><a class="headerlink" href="#credentials-filter" title="Permanent link">#</a></h3>
<p>Leave this file as is (We will use it for storing the temporal token in <code>deploy.sh</code>)</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">"environment"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS_ACCESS_KEY_ID"</span><span class="p">,</span><span class="w"></span>
<span class="w">                        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">.Crede</span><span class="kc">nt</span><span class="err">ials.AccessKeyId</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS_SECRET_ACCESS_KEY"</span><span class="p">,</span><span class="w"></span>
<span class="w">                        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">.Crede</span><span class="kc">nt</span><span class="err">ials.Secre</span><span class="kc">t</span><span class="err">AccessKey</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS_SESSION_TOKEN"</span><span class="p">,</span><span class="w"></span>
<span class="w">                        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">.Crede</span><span class="kc">nt</span><span class="err">ials.Sessio</span><span class="kc">n</span><span class="err">Toke</span><span class="kc">n</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="running-an-experiment">Running an experiment<a class="headerlink" href="#running-an-experiment" title="Permanent link">#</a></h3>
<p>We provided a simple bash file for creating the image, uploading/updating the job definition and running the experiment:</p>
<div class="highlight"><pre><span></span><code>    ./deploy.sh -h

    Usage: ./deploy.sh <span class="o">(</span>-h <span class="p">|</span> -i <span class="p">|</span> -u <span class="p">|</span> -b <span class="p">|</span> -r <span class="p">|</span> -a <span class="p">|</span> --sync_<span class="o">{</span>to,from<span class="o">}</span>_s3 <span class="o">)</span>
    OPTIONS:
       -h<span class="p">|</span>--help                   Show this message
       -i<span class="p">|</span>--info                   Show information about the environment
       -b<span class="p">|</span>--update-images          Build the triage image and push it to the AWS ECR
       -u<span class="p">|</span>--update-jobs            Update the triage job definition <span class="k">in</span> AWS Batch
       -r<span class="p">|</span>--run-experiment         Run experiments on chile-dt data
       --sync-to-s3                Uploads the experiments and configuration files to s3://your_project
       --sync-from-s3              Gets the experiments and configuration files from s3://your_project
    EXAMPLES:
       Build and push the images to your AWS ECR:
            $ ./deploy.sh -b
       Update the job<span class="err">'</span>s definitions:
            $ ./deploy.sh -u
       Run triage experiments:
            $ ./deploy.sh -r --experiment_file<span class="o">=</span>s3://your_project/experiments/test.yaml,project_path<span class="o">=</span>s3://your_project/triage,replace<span class="o">=</span>--replace
</code></pre></div>
<p>If you have multiple AWS profiles use <code>deploy.sh</code> as follows:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="nv">AWS_PROFILE</span><span class="o">=</span>your_profile<span class="o">]</span> ./deploy.sh -r <span class="o">[</span>job-run-name<span class="o">]</span> <span class="nv">experiment_file</span><span class="o">=</span>s3://<span class="o">{</span>your_bucket<span class="o">}</span>/experiments/simple_test_skeleton.yaml,output_path<span class="o">=</span>s3://<span class="o">{</span>your_bucket<span class="o">}</span>/triage,replace<span class="o">=</span>--no-replace,save_predictions<span class="o">=</span>--no-save-predictions,profile<span class="o">=</span>--profile,validate<span class="o">=</span>--validate
</code></pre></div>
<p>Where <code>your_profile</code> is the name of the profile in <code>~/.aws/credentials</code></p>
<h3 id="suggested-workflow">Suggested workflow<a class="headerlink" href="#suggested-workflow" title="Permanent link">#</a></h3>
<p>The workflow now is:</p>
<ul>
<li>
<p>At the beginning of the project</p>
<ul>
<li>Set a <code>docker image</code> and publish it to the AWS ECR (if needed, or you can use the <code>triage</code> official one).</li>
</ul>
<blockquote>
<p>You could create different images if you want to run something more tailored to you (like not using the <code>cli</code> interface)</p>
</blockquote>
<ul>
<li>Create a <em>job definition</em> and publish it:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="nv">AWS_PROFILE</span><span class="o">=</span>your_profile<span class="o">]</span> ./deploy.sh -u
</code></pre></div>
<blockquote>
<p>You could create different jobs if, for example, you want to have different resources (maybe small resources for testing or a lot of resources for a big experiment)</p>
</blockquote>
</li>
<li>
<p>Every time that you have an idea about how to improve the results</p>
<ul>
<li>Create experiment files and publish them to the <code>s3</code> bucket:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="nv">AWS_PROFILE</span><span class="o">=</span>your_profile<span class="o">]</span> ./deploy.sh --synt-to-s3
</code></pre></div>
<ul>
<li>Run the experiments</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="nv">AWS_PROFILE</span><span class="o">=</span>your_profile<span class="o">]</span> ./deploy.sh -r <span class="o">[</span>job-run-name<span class="o">]</span> <span class="nv">experiment_file</span><span class="o">=</span>s3://<span class="o">{</span>your_bucket<span class="o">}</span>/experiments/simple_test_skeleton.yaml,output_path<span class="o">=</span>s3://<span class="o">{</span>your_bucket<span class="o">}</span>/triage,replace<span class="o">=</span>--no-replace,save_predictions<span class="o">=</span>--no-save-predictions,profile<span class="o">=</span>--profile,validate<span class="o">=</span>--validate
</code></pre></div>
</li>
</ul>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a class="md-footer__link md-footer__link--prev" href="../../predictlist/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Predictlist
            </div>
</div>
</a>
<a class="md-footer__link md-footer__link--next" href="../../db/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Database Provisioner
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
<div class="md-footer-social">
<a class="md-footer-social__link" href="https://github.com/dssg/triage" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://twitter.com/datascifellows" rel="noopener" target="_blank" title="twitter.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://linkedin.com/company/center-for-data-science-and-public-policy-university-of-chicago" rel="noopener" target="_blank" title="linkedin.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.fb4a9340.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.a1c7c35e.min.js"></script>
<script src="../../js/mermaid.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>